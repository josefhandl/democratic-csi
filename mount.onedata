#!/bin/bash


# provider
echo "$1"

# mount point
echo "$2"

# -o
echo "$3"

# all options
echo "$4"


token=$(echo "$4" | grep -Eo '(^|,)onedata_token=[a-zA-Z0-9]+(,|$)' | grep -Po '(?<=onedata_token=)[a-zA-Z0-9]+')

echo "$token"

if [ -z "$token" ]; then
	echo "Cannot parse token"
	exit 1
fi

oneclient -H "$1" -t "$token" -o allow_other "$2"
